<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<base th:href="@{/}">
<head>
<meta charset="UTF-8">
<title>My Page</title>
<link th:insert="~{/front-end/htmlfile/css.html}" />

<style type="text/css">
.bookingcontainer {
	width: 80%;
	margin: 0 auto;
	display: flex;
	flex-direction: row;
	justify-content: space-between;
	align-items: center;
	border: 1px solid #ccc;
	padding: 10px 20px;
	border-radius: 10px;
	height: 50%;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.title {
	font-size: 20px;
	font-weight: bold;
}

.form-control {
	margin-bottom: 10px;
}

.submit-btn {
	background-color: #007bff;
	color: #fff;
	border: none;
	padding: 10px 20px;
	border-radius: 5px;
	cursor: pointer;
}

.bookingcontainer>div {
	flex: 1;
	margin-right: 20px; /* 调整元素之间的水平间距 */
}

.bookingcontainer>div:first-child {
	margin-left: 20px; /* 最后一个元素不需要右侧的间距 */
}

body {
	font-family: Arial, sans-serif;
	margin: 0;
	padding: 20px;
}

.mail {
	max-width: 600px;
	margin: 0 auto;
	padding: 20px;
	border: 1px solid #ccc;
	border-radius: 5px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.form-group {
	margin-bottom: 15px;
}

.form-group label {
	display: block;
	margin-bottom: 5px;
}

.form-group input, .form-group textarea {
	width: 100%;
	padding: 10px;
	border: 1px solid #ccc;
	border-radius: 3px;
}
.image-container {
	position: relative;
	width: 100%;
	max-width: 100%;
	overflow: hidden; /* 确保放大后图片不会超出容器 */
}

.image-container img {
	display: block;
	width: 100%;
	height: 388.59px;
	transition: transform 0.5s ease, opacity 0.5s ease;
}

.image-container .overlay {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	height: 100%;
	width: 100%;
	opacity: 0;
	transition: opacity 0.5s ease;
	background-color: rgba(0, 0, 0, 0.5); /* 半透明黑色背景 */
	display: flex;
	align-items: center;
	justify-content: center;
}

.image-container .circle-text {
	width: 150px;
	height: 150px;
	position: relative;
}

.image-container .circle-text text {
	fill: white;
	font-size: 10px;
	font-weight: bold;
	animation: rotateText 5s linear infinite;
	transform-origin: 50% 50%;
	opacity: 0.5;
}

.image-container:hover img {
	opacity: 0.7;
	transform: scale(1.1); /* 放大效果 */
}

.image-container:hover .overlay {
	opacity: 1;
}

@keyframes rotateText {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}
.arrow {
	animation: jump 1s infinite;
}

@keyframes jump {
	0%, 100% {
		transform: translate(50%, 50%) translateX(0);
	}
	50% {
		transform: translate(50%, 50%) translateX(10px);
	}
}

 .about {
            display: flex;
            justify-content: space-between;
            padding: 20px;
}
 .mail, .description {
            width: 50%;
}
.description {
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.description h2 {
    font-size: 34px;
    color:#46A3FF;
    margin-bottom: 5px;
    border-bottom: 2px solid #007BFF;
    padding-bottom: 5px;
       font-family: 'Microsoft JhengHei', sans-serif;
    
}

.description p {
    font-size: 20px;
    color: 	#613030;
    margin-bottom: 5px;
       font-family: 'Microsoft JhengHei', sans-serif;
}

.description h3 {
    font-size: 28px;
    color: 	#46A3FF;
    margin-bottom: 10px;
    font-weight: bold;
       font-family: 'Microsoft JhengHei', sans-serif;
}

.description b {
    font-size: 16px;
    color: #555;
}

.description p, .description b {
    line-height: 1.6;
}
 
#chat-circle {
	position: fixed;
	bottom: 50px;
	right: 50px;
	background: #5A5EB9;
	width: 80px;
	height: 80px;
	border-radius: 50%;
	color: white;
	padding: 28px;
	cursor: pointer;
	box-shadow: 0px 3px 16px 0px rgba(0, 0, 0, 0.6), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
	z-index: 1000;
}

.chat-box {
	display: none;
	background: #efefef;
	position: fixed;
	right: 30px;
	bottom: 50px;
	width: 350px;
	max-width: 85vw;
	max-height: 100vh;
	border-radius: 5px;
	box-shadow: 0px 5px 35px 9px #ccc;
	z-index: 1000;
}

.chat-box-toggle {
	float: right;
	margin-right: 15px;
	cursor: pointer;
}

.chat-box-header {
	background: #5A5EB9;
	height: 70px;
	border-top-left-radius: 5px;
	border-top-right-radius: 5px;
	color: white;
	text-align: center;
	font-size: 20px;
	padding-top: 17px;
}

.chat-box-body {
	position: relative;
	height: 370px;
	border: 1px solid #ccc;
	overflow: hidden;
}

.chat-box-body:after {
	content: "";
	background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAgOCkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGNpcmNsZSBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgY3g9IjE3NiIgY3k9IjEyIiByPSI0Ii8+PHBhdGggZD0iTTIwLjUuNWwyMyAxMW0tMjkgODRsLTMuNzkgMTAuMzc3TTI3LjAzNyAxMzEuNGw1Ljg5OCAyLjIwMy0zLjQ2IDUuOTQ3IDYuMDcyIDIuMzkyLTMuOTMzIDUuNzU4bTEyOC43MzMgMzUuMzdsLjY5My05LjMxNiAxMC4yOTIuMDUyLjQxNi05LjIyMiA5LjI3NC4zMzJNLjUgNDguNXM2LjEzMSA2LjQxMyA2Ljg0NyAxNC44MDVjLjcxNSA4LjM5My0yLjUyIDE0LjgwNi0yLjUyIDE0LjgwNk0xMjQuNTU1IDkwcy03LjQ0NCAwLTEzLjY3IDYuMTkyYy02LjIyNyA2LjE5Mi00LjgzOCAxMi4wMTItNC44MzggMTIuMDEybTIuMjQgNjguNjI2cy00LjAyNi05LjAyNS0xOC4xNDUtOS4wMjUtMTguMTQ1IDUuNy0xOC4xNDUgNS43IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTg1LjcxNiAzNi4xNDZsNS4yNDMtOS41MjFoMTEuMDkzbDUuNDE2IDkuNTIxLTUuNDEgOS4xODVIOTAuOTUzbC01LjIzNy05LjE4NXptNjMuOTA5IDE1LjQ3OWgxMC43NXYxMC43NWgtMTAuNzV6IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIvPjxjaXJjbGUgZmlsbD0iIzAwMCIgY3g9IjcxLjUiIGN5PSI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzAwMCIgY3g9IjE3MC41IiBjeT0iOTUuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjMDAwIiBjeD0iODEuNSIgY3k9IjEzNC41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiMwMDAiIGN4PSIxMy41IiBjeT0iMjMuNSIgcj0iMS41Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTkzIDcxaDN2M2gtM3ptMzMgODRoM3YzaC0zeiIvPjxwYXRoIGQ9Ik0zOS4zODQgNTEuMTIybDUuNzU4LTQuNDU0IDYuNDUzIDQuMjA1LTIuMjk0IDcuMzYzaC03Ljc5bC0yLjEyNy03LjExNHpNMTMwLjE5NSA0LjAzbDEzLjgzIDUuMDYyLTEwLjA5IDcuMDQ4LTMuNzQtMTIuMTF6bS04MyA5NWwxNC44MyA1LjQyOS0xMC44MiA3LjU1Ny00LjAxLTEyLjk4N3pNNS4yMTMgMTYxLjQ5NWwxMS4zMjggMjAuODk3TDIuMjY1IDE4MGwyLjk0OC0xOC41MDV6IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIvPjxwYXRoIGQ9Ik0xNDkuMDUgMTI3LjQ2OHMtLjUxIDIuMTgzLjk5NSAzLjM2NmMxLjU2IDEuMjI2IDguNjQyLTEuODk1IDMuOTY3LTcuNzg1LTIuMzY3LTIuNDc3LTYuNS0zLjIyNi05LjMzIDAtNS4yMDggNS45MzYgMCAxNy41MSAxMS42MSAxMy43MyAxMi40NTgtNi4yNTcgNS42MzMtMjEuNjU2LTUuMDczLTIyLjY1NC02LjYwMi0uNjA2LTE0LjA0MyAxLjc1Ni0xNi4xNTcgMTAuMjY4LTEuNzE4IDYuOTIgMS41ODQgMTcuMzg3IDEyLjQ1IDIwLjQ3NiAxMC44NjYgMy4wOSAxOS4zMzEtNC4zMSAxOS4zMzEtNC4zMSIgc3Ryb2tlPSIjMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==');
	opacity: 0.1;
	top: 0;
	left: 0;
	bottom: 0;
	right: 0;
	height: 100%;
	position: absolute;
	z-index: -1;
}

#chat-input {
	background: #f4f7f9;
	width: 100%;
	position: relative;
	height: 47px;
	padding-top: 10px;
	padding-right: 50px;
	padding-bottom: 10px;
	padding-left: 15px;
	border: none;
	resize: none;
	outline: none;
	border: 1px solid #ccc;
	color: #888;
	border-top: none;
	border-bottom-right-radius: 5px;
	border-bottom-left-radius: 5px;
	overflow: hidden;
}

.chat-input > form {
	margin-bottom: 0;
}

#chat-input::-webkit-input-placeholder {
	/* Chrome/Opera/Safari */
	color: #ccc;
}

#chat-input::-moz-placeholder {
	/* Firefox 19+ */
	color: #ccc;
}

#chat-input:-ms-input-placeholder {
	/* IE 10+ */
	color: #ccc;
}

#chat-input:-moz-placeholder {
	/* Firefox 18- */
	color: #ccc;
}

.chat-submit {
	position: absolute;
	bottom: 3px;
	right: 10px;
	background: transparent;
	box-shadow: none;
	border: none;
	border-radius: 50%;
	color: #5A5EB9;
	width: 35px;
	height: 35px;
}

.chat-logs {
	padding: 15px;
	height: 370px;
	overflow-y: scroll;
}

.chat-logs::-webkit-scrollbar-track {
	-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
	background-color: #F5F5F5;
}

.chat-logs::-webkit-scrollbar {
	width: 5px;
	background-color: #F5F5F5;
}

.chat-logs::-webkit-scrollbar-thumb {
	background-color: #5A5EB9;
}

@media only screen and (max-width: 500px) {
	.chat-logs {
		height: 40vh;
	}
}

.chat-msg.user > .msg-avatar img {
	width: 45px;
	height: 45px;
	border-radius: 50%;
	float: left;
	width: 15%;
}

.chat-msg.self > .msg-avatar img {
	width: 45px;
	height: 45px;
	border-radius: 50%;
	float: right;
	width: 15%;
}

.cm-msg-text {
	background: white;
	padding: 10px 15px 10px 15px;
	color: #666;
	max-width: 75%;
	float: left;
	margin-left: 10px;
	position: relative;
	margin-bottom: 20px;
	border-radius: 30px;
}

.chat-msg {
	clear: both;
}

.chat-msg.self > .cm-msg-text {
	float: right;
	margin-right: 10px;
	background: #5A5EB9;
	color: white;
}

.cm-msg-button > ul > li {
	list-style: none;
	float: left;
	width: 50%;
}

.cm-msg-button {
	clear: both;
	margin-bottom: 70px;
}

</style>


</head>

<body class="main-layout p-0">

	<th:block link th:insert="~{/front-end/htmlfile/content1.html}" />
	<!-- 圖片跑馬燈 & 註解日期 -->
	<section class="banner_main">
		<div id="myCarousel" class="carousel slide banner"
			data-ride="carousel" data-interval="4000">
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
				<li data-target="#myCarousel" data-slide-to="3"></li>
				<li data-target="#myCarousel" data-slide-to="4"></li>
			</ol>
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img class="first-slide" th:src="@{/frontend/images/banner1.jpg}"
						alt="First slide">
					<div class="container"></div>
				</div>
				<div class="carousel-item">
					<img class="second-slide" th:src="@{/frontend/images/banner2.jpg}"
						alt="Second slide">
				</div>
				<div class="carousel-item">
					<img class="third-slide" th:src="@{/frontend/images/banner3.jpg}"
						alt="Third slide">
				</div>
				<div class="carousel-item">
					<img class="third-slide" th:src="@{/frontend/images/banner4.jpg}"
						alt="Fourth slide">
				</div>
				<div class="carousel-item">
					<img class="third-slide" th:src="@{/frontend/images/banner5.jpg}"
						alt="Fifth slide">
				</div>
			</div>
			<a class="carousel-control-prev" href="#myCarousel" role="button"
				data-slide="prev"> <span class="carousel-control-prev-icon"
				aria-hidden="true"></span> <span class="sr-only">Previous</span>
			</a> <a class="carousel-control-next" href="#myCarousel" role="button"
				data-slide="next"> <span class="carousel-control-next-icon"
				aria-hidden="true"></span> <span class="sr-only">Next</span>
			</a>
		</div>
		<!-- <div class="booking_ocline">   -----------------------------------我是日期!!!
            <div class="container">
               <div class="row">
                  <div class="col-md-5">
                     <div class="book_room">
                        <h1>Book a Room Online</h1>
                        <form class="book_now">
                           <div class="row">
                              <div class="col-md-12">
                                 <span>Arrival</span>
                                 <img class="date_cua" src="images/date.png">
                                 <input class="online_book" placeholder="dd/mm/yyyy" type="date" name="dd/mm/yyyy">
                              </div>
                              <div class="col-md-12">
                                 <span>Departure</span>
                                 <img class="date_cua" src="images/date.png">
                                 <input class="online_book" placeholder="dd/mm/yyyy" type="date" name="dd/mm/yyyy">
                              </div>
                              <div class="col-md-12">
                                 <button class="book_btn">立刻下訂</button>
                              </div>
                           </div>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
         </div> -->
	</section>



	<div th:fragment="content">

		<div class="news-section">
			<div class="container">
				<form th:action="@{/roomschedule/roomScheduleQueryList}"
					method="post">
					<div class="bookingcontainer">
						<div class="title">Booking Now</div>

						<div>
							<label for="checkin-date">入住日期:</label> <input type="date"
								id="checkin-date" class="form-control" name="startquerydate">
						</div>
						<div>
							<label for="checkout-date">退房日期:</label> <input type="date"
								id="checkout-date" class="form-control" name="endquerydate">
						</div>
						<div>
							<label for="guests">入住人數:</label> <select id="guests"
								class="form-control" name="peopleAmount">
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5</option>
								<option value="6">6</option>
								<option value="7">7</option>
								<option value="8">8</option>
							</select>
						</div>
						<input type="submit" class="submit-btn" value="查詢"
							onclick="return submitForm()">
					</div>
				</form>
				<div class="about">
					<div class="container">
						<div class="row">
							<div class="col-md-7 text-start" style="margin-top: 50px">

									<p style="color: grey; font-size: small">活動期間 : 2024-05-23 到 2024-08-01</p>
									<h3 class="fw-bold" style="color: #847674" >夏季特別優惠</h3>
									<h5>預訂三晚或以上，享受一晚免費住宿的夏季特別優惠</h5>
									<p style="color: #847674;">從現在起至2024年8月31日，我們為所有入住的客人提供特別的夏季優惠。預訂三晚或以上，即可享受一晚免費住宿。趕快預訂您的夏季假期，享受陽光、海灘和我們的豪華設施吧！</p>

							</div>
							<div class="col-md-5">
								<div class="about_img w-100">
									<figure>
										<a class="image-container" th:href="@{/spotnews}">
											<img style="height: 300px" th:src="@{/frontend/images/spot1.jpg}" alt="#" />
											<div class="overlay">
												<svg viewBox="0 0 100 100" class="circle-text">
													<g id="arrow" transform="translate(40, 50)" class="arrow">
														<line x1="-10" y1="0" x2="10" y2="0" stroke="white" stroke-width="2" />
														<polygon points="10,-5 15,0 10,5" fill="white" />
													</g>
													<path id="circle" d="M 50, 50 m -37, 0 a 37,37 0 1,1 74,0 a 37,37 0 1,1 -74,0" fill="none" />
													<text>
														<textPath style="font-size: smaller" xlink:href="#circle">
															SHOW MORE&nbsp;SHOW &nbsp;MORE&nbsp;SHOW MORE&nbsp;SHOW MORE&nbsp;
														</textPath>
													</text>
												</svg>
											</div>
										</a>
									</figure>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- 關於我們區域結束 -->

				<!-- 最新消息 -->
				<div class="news-section">
					<div class="container">
				
						<!-- 新聞項目 -->
						<div class="news-item">
							<!-- 							<img th:src="@{/frontend/path-to-your-image.jpg}" -->
							<!-- 								alt="news image"> -->
							<div class="news-content">
								<p class="date">報導期間: 2024.04.15 - 2024.12.31</p>
									<h2 class="fw-bold" style="color: #847674" >媒體報導</h2>
								<p style="color: #847674;font-size: large">炎炎夏日，joyfulresort邀您一起歡樂一夏，一享童樂</p>

								<!-- 								<a href="link-to-full-article.html" class="read-more">查看詳情</a> -->
								<a th:href="@{/joyfulresort/newslist/newslistinfo}"
									method="post">查看詳情</a><br>

							</div>
						</div>

					</div>
				</div>

				<!-- 聯絡我們MAILL區域 -->
			<div class=about>
				<div class="mail">
					
					<form id="contactForm">
						<div class="form-group">
							<label for="name">姓名</label> <input type="text" id="name"placeholder="輸入你的名字"
								name="name" required>
						</div>
						<div class="form-group">
							<label for="email">信箱</label> <input type="email" id="email"  placeholder="輸入你的信箱"
								name="email" required>
						</div>
						<div class="form-group">
							<label for="subject">主旨</label> <input type="text" id="subject" minlength="2" maxlength="30" placeholder="最多15個字"
								name="subject" required>
						</div>
						<div class="form-group">
							<label for="message">你的訊息</label>
							<textarea id="message" name="message" rows="4"  maxlength="200" minlength="6" placeholder="最多100字  "  style=" max-height: 200px; " required></textarea>
						</div>
						<div class="form-group">
							<input type="submit" class="submit-btn" value="送出" >
						</div>
					</form>
				</div>
			<div class="description">
			    <h2>聯絡我們</h2>
			    <p>有任何問題，歡迎填寫左方表單寄信給我們，我們會盡快與您聯繫！</p>
			    
			    <br>
			    <h3>營業時間</h3>
			    <p class="bold">周一至周五：09:00-20:00</p>
			    <p class="bold">週六至周日：10:00-18:00</p>
			    <br>
			    <h3>地址</h3>
			    <p class="bold">320桃園市中壢區復興路46號9樓</p>
			    <br>
			    <h3>電話&信箱</h3>
			    <p class="bold">joyfulresort@gmail.com</p>
			    <p class="bold">03-457-9876</p>
			</div>
			</div>
				<script>
        document.getElementById('contactForm').addEventListener('submit', function(event) {
            event.preventDefault();
	
                 
            
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                subject: document.getElementById('subject').value,
                message: document.getElementById('message').value
            };

            fetch('/api/sendMail', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('送出成功!');
                    setTimeout(function() {
                        window.location.href = data.redirect;
                    }, 100);
                } else {
                    alert('送出失敗');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('送出失敗');
            });
        });
    </script>




			</div>
		</div>
	</div>

	<th:block link th:insert="~{/front-end/htmlfile/content2.html}" />
	<th:block link th:insert="~{/front-end/htmlfile/script.html}" />

	<script>
	
    var today = new Date();
    var tomorrow = new Date();
    tomorrow.setDate(today.getDate() + 1);
    var twoMonthsLater = new Date(today.getFullYear(), today.getMonth() + 2, today.getDate());
    var minDate = tomorrow.toISOString().split('T')[0];
    var maxDate = twoMonthsLater.toISOString().split('T')[0];
    
    document.getElementById('checkin-date').min = minDate;
    document.getElementById('checkout-date').min = minDate;
    
    document.getElementById('checkin-date').max = maxDate;
    document.getElementById('checkout-date').max = maxDate;
    
    function submitForm() {
        var checkinDateInput = document.getElementById('checkin-date').value;
        var checkoutDateInput = document.getElementById('checkout-date').value;

        if (checkinDateInput === "" || checkoutDateInput === "") {
            alert("請選擇入住日期及退房日期");
            return false;
        }

        var checkinDate = new Date(checkinDateInput);
        var checkoutDate = new Date(checkoutDateInput);

        if (checkinDate >= checkoutDate) {
            alert("退房日期必須在入住日期之後");
            return false;
        }

    }
   
</script>

<div id="chat-circle" class="btn btn-raised">
	<i class="material-icons">客服系統</i>
</div>

<div class="chat-box">
	<div class="chat-box-header">
		ChatBox
		<span class="chat-box-toggle"><i class="material-icons">close</i></span>
	</div>
	<div class="chat-box-body">
		<div class="chat-box-overlay"></div>
		<div class="chat-logs"></div><!--chat-log -->
	</div>
	<div class="chat-input">
		<form>
			<input type="text" id="chat-input" placeholder="Send a message..." />
			<button type="submit" class="chat-submit" id="chat-submit"><i class="material-icons">send</i></button>
		</form>
	</div>
</div>

<script>
$(function () {
    var INDEX = 0;

    function generate_message(msg, type) {
        INDEX++;
        var str = "";
        str += "<div id='cm-msg-" + INDEX + "' class=\"chat-msg " + type + "\">";
        str += "          <span class=\"msg-avatar\">";
        str += "            <img src=\"https:\/\/image.crisp.im\/avatar\/operator\/196af8cc-f6ad-4ef7-afd1-c45d5231387c\/240\/?1483361727745\">";
        str += "          <\/span>";
        str += "          <div class=\"cm-msg-text\">";
        str += msg;
        str += "          <\/div>";
        str += "        <\/div>";
        $(".chat-logs").append(str);
        $("#cm-msg-" + INDEX).hide().fadeIn(300);
        if (type == 'self') {
            $("#chat-input").val('');
        }
        $(".chat-logs").stop().animate({ scrollTop: $(".chat-logs")[0].scrollHeight }, 1000);
    }

    $("#chat-submit").click(async function (e) {
        e.preventDefault();
        var msg = $("#chat-input").val();
        if (msg.trim() == '') {
            return false;
        }
        generate_message(msg, 'self');
        const content = msg.trim();
        try {
            const response = await fetch(`/qalist/reply?keyWord=${encodeURIComponent(content)}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            if (!response.ok) {
                throw new Error(`Http error! status: ${response.status}`);
            }
            const data = await response.json();
            const reply = data.length > 0 ? data[0].qaAnswer : "有任何進一步想了解的訊息，請與客服人員聯繫。Joyfulresort聯絡方式如下：03-4251108";
            setTimeout(function () {
                generate_message(reply, 'user');
            }, 1000);
        } catch (error) {
            console.error('Error:', error);
            alert('送出失敗');
        }
    });

    $("#chat-circle").click(function () {
        $("#chat-circle").toggle('scale');
        $(".chat-box").toggle('scale');
        if ($(".chat-box").is(":visible")) {
            // 顯示初始化消息
            generate_message("歡迎光臨Joyfulresort，請問您有什麼需求需要提供給您的嗎?", 'user');
        }
    });

    $(".chat-box-toggle").click(function () {
        $("#chat-circle").toggle('scale');
        $(".chat-box").toggle('scale');
    });

});
</script>

</body>

</html>
