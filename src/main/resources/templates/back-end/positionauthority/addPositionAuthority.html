<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<base th:href="@{/}">
<head>
<meta charset="UTF-8">
<title>新增職務功能</title>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link th:insert="~{/back-end/htmlfile/css.html}" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<style>
.header {
	text-align: center;
	font-size: 30px;
	font-weight: bold;
	margin-bottom: 20px;
	color: black;
}

.form-inline {
	display: flex;
	justify-content: center;
	width: 100%;
}

.form-inline label, .form-inline select {
	display: inline-block;
	vertical-align: middle;
	margin-right: 10px;
}

form label {
	color: black;
	margin: 5px 0;
}

form span {
	color: black;
}

hr {
	border: 2px solid #006666;
}

.checkbox-container {
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	gap: 10px;
	margin-bottom: 20px;
}

.checkbox-group {
	display: flex;
	align-items: center;
}

input[type="checkbox"] {
	margin-right: 5px;
}

button {
	background-color: #008b8b; /* 初始背景顏色 */
	color: white; /* 文字顏色 */
	border: none; /* 無邊框 */
	padding: 10px 20px; /* 內部間距 */
	transition: all 0.3s ease; /* 平滑過渡效果 */
	cursor: pointer; /* 指針形狀 */
	font-size: 16px; /* 文字大小 */
}

button:hover {
	background-color: #006666; /* 滑鼠懸停時的背景顏色 */
	transform: scale(1.1); /* 滑鼠懸停時放大 */
}
</style>


</head>
<body>
	<th:block th:insert="~{/back-end/htmlfile/content1}" />
	<div class="container-fluid pt-4 px-4">
		<div class="bg-light rounded">
			<div class="G3_content">

				<a th:href="@{/positionauthority/updatePositionAuthority}" class="edit-link" title="修改職務功能設定"> <i
					class="fas fa-pen"></i> 修改
				</a>
				
				
				<a th:href="@{/positionauthority/allPositionAuthority}" class="edit-link" title="修改職務功能設定"> <i
					class="fas fa-pen"></i> 職務功能列表
				</a>
				<!-- 標題區域開始 -->
				<div class="header">
					<i class="fa fa-gear"></i> <span>新增功能職務</span>
				</div>
				<!-- 表單開始 -->
				<form th:action="@{/addPositionAuthority}" method="post">
					<div class="form-inline">
						<label for="positionId">* 選擇設定職務:</label> <select id="positionId"
							name="positionId">
							<option value="" selected>選擇職位</option>
							<option th:each="position : ${positionListData}"
								th:value="${position.positionId}"
								th:text="${position.positionName}"></option>
						</select>
					</div>
					<hr>
					<!-- 確保 <hr> 在表單內但在選項外 -->
					<div class="checkbox-container">
						<div th:each="function : ${authorityFunctionListData}"
							class="checkbox-group">
							<label> <input type="checkbox"
								th:value="${function.functionId}" th:name="functionIds" /> <span
								th:text="${function.functionName}"></span>
							</label>
						</div>
					</div>

					<button type="submit">提交</button>
				</form>

				<!-- 表單結束 -->


				<script>
					$(document)
							.ready(
									function() {
										$('form')
												.submit(
														function(event) {
															var positionId = $(
																	'#positionId')
																	.val(); // 獲取下拉選單的值
															var isChecked = $('input[type="checkbox"]:checked').length > 0; // 檢查是否有勾選的 checkbox

															if (positionId === ""
																	|| !isChecked) {
																alert("請選擇職位並至少勾選一個權限。");
																event
																		.preventDefault(); // 防止表單提交
															}
														});
									});
				</script>

			</div>
		</div>
	</div>
	<th:block th:insert="~{/back-end/htmlfile/content2}" />
	<th:block th:insert="~{/back-end/htmlfile/script}" />
</body>
</html>
